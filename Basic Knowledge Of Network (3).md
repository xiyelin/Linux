## 网络基础知识（三）

-----------------------------------------------

### 以太网(RFC 894)帧格式

![image](http://hbimg.b0.upaiyun.com/f3a5336c2e39dd2e0fa41356c878b40987f6c2ac173e1-DtPzeb_fw658)


	以太网帧中的数据长度规定最小46字节,最大1500字节,ARP和RARP数据包的长度不够46字节,要在后面补填充位(PAD)。
	
	MTU(最大传输单元)：1500称为以太网的最大传输单元，MTU这个概念指数据帧中有效载荷的最大长度,不包括帧首部的长度。
	
	不同的网络类型有不同的MTU,如果一个数据包从以太网路由到拨号链路上,数据包长度大于拨号链路的MTU了,则需要对数据
	包进行分片(fragmentation)。分片在MAC帧上层完成的。

<br>
<br>

### ARP数据报格式

	在网络通讯时,源主机的应用程序知道目的主机的IP地址和端⼜号,却不知道目的主机的硬件地址,而数据包首先是被网卡接收
	到再去处理上层协议的,如果接收到的数据包的硬件地址与本机不符,则直接丢弃。因此在通讯前必须获得目的主机的硬件地
	址。 ARP协议就起到这个作用。

<br>

	ARP（地址解析协议）请求：

	源主机发出ARP请求，询问这个目的IP的硬件地址，并将这个请求广播到本地网段，目的主机接收到广播的ARP请求,发现其中
	的IP地址与本机相符,则发送一个ARP应答数据包给源主机,将自己的硬件地址填写在应答包中。
	
<br>

	ARP缓存表：
	
	每台主机都维护一个ARP缓存表,可以用 arp -a 命令查看。 
	
	缓存表中的表项有过期时间(一般为20分钟),如果20分钟内没有再次使用某个表项,则该表项失效,下次还要发ARP请求来获得
	目的主机的硬件地址。

<br>
	
![image](http://hbimg.b0.upaiyun.com/9280be59399b092c37a72b68bf28c029759e2b56196bf-WXEBdn_fw658)

<br>







