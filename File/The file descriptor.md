### 文件描述符(the file descriptor)

	对于内核而言，所有打开的文件都通过文件描述符引用。文件描述符是一个“非负”整数。当打开一个现有文件或创建一个新文
	件时，内核向进程返回一个文件描述符。当读写一个文件时，使用open()或者create()返回的文件描述符标示该文件，将其作
	为参数传递给read()或write()。
	
	
	习惯上，标准输入（standard input）的文件描述符是 0，标准输出（standard output）是 1，标准错误（standard error）
	是 2。尽管这种习惯并非Unix内核的特性，但是因为一些shell和很多应用程序都使用这种习惯，因此，如果内核不遵循这种习
	惯的话，很多应用程序将不能使用。
	
	POSIX 定义了 STDIN_FILENO、STDOUT_FILENO 和 STDERR_FILENO 来代替 0、1、2。这三个符号常量的定义位于头文件 unistd.h。
	
![image](http://hbimg.b0.upaiyun.com/bcceb43d7792ca43a6bf5393cad657e54a2fb64f700e-qaIyHD_fw658)

<br>

### 文件描述符的取值范围：

	文件描述符的有效范围是 0 到 OPEN_MAX。一般来说，每个进程最多可以打开 64 个文件（0 — 63）。对于 FreeBSD 5.2.1、
	Mac OS X 10.3 和 Solaris 9 来说，每个进程最多可以打开文件的多少取决于系统内存的大小，int 的大小，以及系统管理
	员设定的限制。Linux 2.4.22 强制规定最多不能超过 1,048,576 。

<br>

### 文件描述符的相关信息：

	文件描述符与包括相关信息（如文件的打开模式、文件的位置类型、文件的初始类型等）的文件对象相关联，这些信息被称作
	文件的上下文。
	
<br>

### 文件描述符的获取方式：

	1.通过 create()或者open()函数获取。
	2.通过从父进程继承。
	
<br>

### 如何定义文件描述符的数量：

	Unix和Linux都有文件描述符。不过，二者的主要区别在于如何设置文件描述符的硬极限值、缺省值和配置过程。
	
	1.Unix系统：
	/usr/bin/ulimit实用程序定义允许单个进程使用的文件描述符的数量。它的最大值在rlim_fd_max中定义，在缺
	省情况下，它设置为65,536。只有root用户才能修改这些内核值。
	
	2：Linux系统：
	管理用户可以在etc/security/limits.conf配置文件中设置他们的文件描述符极限。

<br>

### 文件描述符与文件指针：

	对于ANSI C规范中定义的标准库的文件I/O操作。ANSI C规范给出了一个解决方法，就是使用FILE结构体的指针。
	事实上，UNIX/Linux平台上的FILE结构体的实现中往往都是封装了文件描述符变量在其中。
	
	区别：
	
		文件描述符：在linux系统中打开文件就会获得文件描述符，它是个很小的正整数。每个进程在PCB中保存着
		一份文件描述符表，文件描述符就是这个表的索引，每个表项都有一个指向已打开文件的指针。
		
		文件指针：C语言中使用文件指针做为I/O的句柄。文件指针指向进程用户区中的一个被称为FILE结构的数据
		结构。FILE结构包括一个缓冲区和一个文件描述符。而文件描述符是文件描述符表的一个索引，因此从某种
		意义上说文件指针就是句柄的句柄（在Windows系统上，文件描述符被称作文件句柄）。
		
		



	
