## 网络基础知识（二)

-------------------------------------------------------

<br>

### TCP/IP协议栈

	TCP/IP网络协议栈分为应用层(Application)、传输层(Transport)、网络层(Network)和链路层(Link)四层。
	
![image](http://hbimg.b0.upaiyun.com/940faf9df0372c9a129bcdc478035238a7e605659956-1VyztI_fw658)

<br>

### 两台计算机之间的通讯过程

![image](http://hbimg.b0.upaiyun.com/792ee5aa8026631f76cd1e024a1e79909a2fc91e16343-sMeuwQ_fw658)

<br>
<br>

### TCP/IP数据包的封装

	应用层数据通过协议栈发到网络上时,每层协议都要加上一个数据头部(header),称为封装(Encapsulation)。
	
![image](http://hbimg.b0.upaiyun.com/3492755ce609eb5ca8b9e7ecf92844d0671802ee1b05a-ga0IWi_fw658)


	解包：数据封装成帧后发到传输介质上,到达目的主机后每层协议再剥掉相应的头部,最后将应用层数据交给应用程序处理。


### 不同的网段中，数据的传输过程

![image](http://hbimg.b0.upaiyun.com/ff8e320b834e6d17432ccb8107d1defea88c063cb31e-anJtIj_fw658)


- [x] 集线器：工作在物理层的网络设备,用于双绞线的连接和信号中继(将已衰减的信号再次放⼤使之传得更远)。
- [x] 交换机：工作在链路层的网络设备,可以在不同的链路层网络之间转发数据帧。即拆掉链路层首部重新封装之后再转发。
- [x] 路由器：工作在第三层的网络设备,同时兼有交换机的功能,可以在不同的链路层接⼜之间转发数据包,因此路由器需要
　　　　将进来的数据包拆掉网络层和链路层两层首部并重新封装。 


### 目的主机收到数据包后,如何经过各层协议栈最后到达应用程序呢?

![image](http://hbimg.b0.upaiyun.com/5c103c23a940c49d2cdfb0304a5e0d763d7aba5f86ae-ILLyQy_fw658)


	以太网驱动程序首先根据以太网首部中的“上层协议”字段确定该数据帧的有效载荷(payload,指除 去协议首部之外实际传
	
	输的数据)是IP、 ARP还是RARP协议的数据报,然后交给相应的协议处理。假如是IP数据报,IP协议再根据IP首部中的“上层
	
	协议”字段确定该数据报的有效载荷是TCP、UDP、ICMP还是IGMP,然后交给相应的协议处理。假如是TCP段或UDP段,TCP或UDP
	
	协议再根据TCP首部或UDP首部的“端⼜号”字段确定应该将应用层数据交给哪个用户进程。

<br>

### 如何标识网络中的唯一进程？

	IP地址是标识网络中不同主机的地址,而端⼜号就是同一台主机上标识不同进程的地址,IP地址和端⼜号合起来标识网络中唯一的进程。
	







